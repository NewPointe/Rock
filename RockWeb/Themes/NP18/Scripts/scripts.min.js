jQuery(function(o){function s(e){
//window.console.log(hash);
//window.console.log(hash.slice(1));
if(document.getElementById(e.slice(1))){var a=o(e),n=o("header nav.primary").height()+5;// Get fixed header height
if((a=a.length?a:o("[name="+e.slice(1)+"]")).length)return o("html,body").animate({scrollTop:a.offset().top-n},100),!1}}function e(){var e=o(this).scrollTop(),a=o("header nav").outerHeight()+o("header .navbar-subheader").outerHeight(),n=o(".headerImage").outerHeight(),s=o(".subnav").outerHeight();
//console.log(st);
// Make sure they scroll more than delta
Math.abs(t-e)<=5||(
// If they scrolled down and are past the navbar, add class .nav-up.
// This is necessary so you never see what is "behind" the navbar.
10<e?o("header").addClass("opaque"):o("header").removeClass("opaque"),n-a<=e?(o(".subnav").addClass("navbar-fixed-top").css("top",a+"px"),o(".headerImage").css("margin-bottom",s+"px")):(o(".subnav").removeClass("navbar-fixed-top").css("top","auto"),o(".headerImage").css("margin-bottom",0)),t=e)}
/**
	$('.navbar-subheader .church-menu-opener').on('click touchstart', function(e){
		e.preventDefault();
		$('#navbar-main').show().addClass('in');
		$('#churches-mega-menu').show().addClass('open');
	});
  $('#navbar-main .menu-closer').on('click touchstart', function(e){
    e.preventDefault();
			$('#navbar-main').hide().removeClass('in');	
  });
	$('#main-menu a').on('click touchstart', function(){
		if ($('#churches-mega-menu').hasClass('open')) {
			$('#churches-mega-menu').hide().removeClass('open');	
			$('#menu_churches, #menu_church').removeClass('open');
		}
		if ($('#search-mega-menu').hasClass('open')) {
			$('#search-mega-menu').hide().removeClass('open');	
		}
	});
	$('#menu_churches a, #menu_church a').on('click touchstart', function(){
		$('.dropdown').removeClass('open');
		$(this).parent().addClass("open");
		$('#churches-mega-menu').show().addClass('open');
	});
	$("#churches-mega-menu").mouseleave(function(){
    $(this).hide();
    $('#menu_churches, #menu_church').removeClass('open');
	});
  $('#churches-mega-menu .menu-closer').on('click touchstart', function(e){
    e.preventDefault();
    $('#churches-mega-menu').hide();
    $('#menu_churches, #menu_church').removeClass('open');
  });
**/function a(){if(o(".notification-bar").each(function(){o("body").css({"padding-top":o(this).outerHeight()}),o(".navbar-subheader").css({top:o(this).outerHeight()})}),r<992){var e=o("header nav").outerHeight()+o("header .navbar-subheader").outerHeight();o("body").css("margin-top",e)}else o("body").css("margin-top",0)}window.location.hash&&s(window.location.hash),o("a[href*=\\#]:not([href=\\#])").click(function(){location.pathname.replace(/^\//,"")!=this.pathname.replace(/^\//,"")&&location.hostname!=this.hostname||s(this.hash)});
//set class on fixed header after scrolling
var n=!0,t=0,i=5;o(window).scroll(function(){n=!0}),setInterval(function(){n&&(e(),n=!1)},250),o(".navbar-subheader").on("click touchstart",".menu-opener",function(e){e.preventDefault(),o("#navbar-main").show().addClass("open")}),o("#navbar-main").on("click",".closer",function(e){e.preventDefault(),o("#navbar-main").hide().removeClass("open")}),o(".navbar-subheader").on("click",".search-opener",function(e){e.preventDefault(),o("#search-layer").show().addClass("open")}),o("#ipl_search").on("click","a",function(e){e.preventDefault(),o("#search-layer").show().addClass("open"),o(".searchbox input").focus()}),o("#search-layer").on("click",".closer",function(e){e.preventDefault(),o("#search-layer").hide().removeClass("open")}),o("#navbar-main").on("click","li.has-children > a",function(e){if(o("#navbar-main").hasClass("open")){var a=o(this).next(),n=o(this).text();o(a).hasClass("child-menu")&&(e.preventDefault(),o(a).prepend("<li class='backtext'><a>"+n+"</a></li>"),o(a).show().animate({left:"0"},175,"swing"))}}),o("#navbar-main").on("click","li.has-children ul.child-menu li a",function(e){if(o(this).parents().hasClass("backtext")){e.preventDefault();var a=o(this).parents(".child-menu");o(a).animate({left:"100%"},175,"swing",function(){o(a).hide(),o("li.backtext").remove()})}});
/**   
  $('select.sorter, select.filter').select2({
      //allowClear: true,
      minimumResultsForSearch: 20
  });
  $('select.select-church').select2({
      theme: "hollow",
      minimumResultsForSearch: 20
  });
  $('.tier2-item').each(function(){
	  $(this).hover(function(){
		  $(this).find('.select-overlay').css('visibility','visible');
		});
  });
	$('select.sermon-list, select.select-church').on('change', function(){
		var url = $(this).val(); // get selected value
		if (url) { // require a URL
		    window.location = url; // redirect
		}
		return false;
	});
**/
var r=o(window).width();992<=r&&o(".messages-grid .sermondetail").each(function(){var e=o(this).closest(".sermons-container");o(this).appendTo(e)}),o(".series-link").on("click touchstart",function(e){e.preventDefault(),window.console.log(e),o(".sermondetail").hide();var a=o(this).data("openid"),n=o(this).closest(".sermon");o("#"+a).hasClass("open")?(o(".sermon").removeClass("open"),o(".sermondetail").removeClass("open")):(o(".sermon").removeClass("open"),o(".sermondetail").removeClass("open"),o(n).addClass("open"),o("#"+a).addClass("open").slideDown(),s("#"+a))}),o(".sermondetail .closer").on("click touchstart",function(e){e.preventDefault();var a=o(this).closest(".sermondetail");o(".sermon").removeClass("open"),o(a).removeClass("open").hide()}),o(window).resize(function(){a(),n=!0}),a()});